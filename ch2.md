本章讨论信息在计算机上的表示方式。

* 2.1节介绍数字系统（Numeral Systems  ）和位置记数法（positional notation  ）的概念。
* 2.2节和2.3节分别讨论了数字和文本在计算机上的表示方式。
* 2.4节会介绍数据在内存中的组织方式。
* 2.5节讨论指令是如何编码的



# 2.1 数字系统与位置计数法

数字系统是用来表示数字的系统。数字系统定义了一组符号（symbol）和规则，用于表示一组给定的数字（例如自然数）。举个例子，“一元数字系统“是一个数字系统，其中的每个自然数都由对应数量的符号表示。在这个系统中，假设基本符号是★，自然数1、2和5将分别表示为★，★★和★★★★★。

十进制数字系统是人类中最为常见的、用于表示整数/非整数的数字系统。令：

*   $D_{10}$ 是十进制系统重的符号集合，例如 $D_{10}=\{ \text{“0”，“1”，“2”，“3”，“4”，“5”，“6”，“7”，“8”，“9”}\}$，且
*  $d^i$ 是十进制系统中某个数字上的某一位（译注：后续称之为digit），即 $d^i ∈ D_{10}$ 
*  $number_{10}$ 是十进制系统中表示的一个数字

如公式2.1所示，任意自然数能够在十进制系统中用有序的 $m$ 位digit序列来表示，其中上标表示digit的位置。可见最右边的digit的位置是0，最左边digit的位置是 $m-1$

$$
number_{10} = d^{m-1}d^{m-2}...d^1d^0 \tag{2.1}
$$

例如，数字一千九百六十九可以表示为1969，此时, $m=4, d^3=  \text{“1”}, d^2=\text{“9”},  d^1=\text{“6”}, d^0=\text{“9”}$ ，令：

*   $symbol\_value(d^i)$ 是digit $d^i$ 中符号的值，且
*   $symbol\_value(\text{“0”})=0, symbol\_value(\text{“1”})=1..., symbol\_value(\text{“9”})=9$

则十进制系统中一个m位的数字的值能够使用公式2.2计算

$$
value(number_{10})= \sum_{i=0}^{i=m-1}  \underbrace{symbol\_value(d^i) \times 10^i}_{\text{digit value}} \tag{2.2}
$$

观察每个 $d^i$  自身值对整个数字的值的作用，可知这和 $di$ 所用的符号及其自身的位置（ $i$ ）相关。例如数字1969有四个digit： $d^3=$ `1`, $d^2=$ `9`,  $d^1=$ `6`, $d^0=$  `9` ，其中 $d^2$ 的值是 900  而 $d^0$ 的值是 9 。

**位置数字系统（positional numeral system  ）是一种数字系统，其中一个digit $di$ 的值取决于 $di$ 的符号的值**，也取决于该 $di$ 在序列中的位置。十进制数字系统是一种位置数字系统。另一方面，一元和罗马数字系统是非位置数字系统的常见例子。

**数字系统的基，是指一个digit可以使用的不同符号的数量，digit使用不同的符号来表示不同的数字**。一元数字系统的基是1而十进制数字系统的基是10。

二进制、八进制、十进制、十六进制都是位置数字系统，它们在计算机编程中频繁使用。它们之间的唯一差异是基，十进制的基是10，而二进制、八进制和十六进制的基分别是2、8和16。

令：

*  $base$ 是位置数字系统的基
*  $D_{base}$ 位置数字系统中的符号的集合， 如 $D_2=\{\text{“0”, “1”}\}$  且
*  $d^i_{base}$ 是被位置数字系统表示的数字第 $i$  个digit，即 $d^i_{base} ∈ D_{base}$
*  $number_{base}$ 是被数字系统表示的一个数字

则任意自然数能够被二、八、十、十六进制的位置数字系统通过m位的digit序列表示出来，如公式2.3所示   

$$
number_{base} = d_{base}^{m-1}d_{base}^{m-2}...d_{base}^1d_{base}^0  \tag{2.3}
$$

令：

*  $symbol\_value(d_{base}^i)$ 是digit $d_{base}^i$ 中符号的值，且
*  $symbol\_value('0')=0, symbol\_value('1')=1$，以此类推

则在上述的位置数字系统中，一个含有m位digit的自然数的值可以用公式2.4来表示


$$
value(number_{base})= \sum_{i=0}^{i=m-1}  \underbrace{symbol\_value(d_{base}^i) \times base^i}_{\text{digit value}} \tag{2.4}
$$


例如，在二进制位置数字系统中（ $base =2$ ），任意自然数的值可以用公式2.5表示


$$
value(number_2)= \sum_{i=0}^{i=m-1}  \underbrace{symbol\_value(d_2^i) \times 2^i}_{\text{digit value}} \tag{2.5}
$$


注意，`11`在二进制系统中的值是3（ $1 \times 2^1 + 1 \times 2^ 0$ ），在十进制中是（ $1 \times 10^1 + 1 \times 10^ 0$ ），在十六进制系统中是17（ $1 \times 16^1 + 1 \times 16^ 0$ ）



当同时使用多个数字系统时，通常需要对数字进行标记，以便能够识别所使用的数字系统，并确定其值。一种常见的表示法是在数字后面添加一个下标，以表示位置数字系统的基。例如，数字 $11_{10}$ 的值是11，而数字 $11_2$的值是3。



然而在计算机程序，使用下标并不是一种自然的方法。常见的方法是使用后缀来表示数字的基。例如在C语言，程序员可能会使用前缀`0b/0/0x`来表明数字是二、八、十六进制的，此时的基分别是`2/8/16`。如果没有前缀的话，则默认为十进制。



二进制和八进制数字系统使用十进制数字系统中符号的子集来表示数字。另一方面，十六进制数字系统需要10个以上的符号，因此需要新的符号。在这种情况下，字母表的第一个字母用于补充符号集。表2.1给出了这些位置数字系统中使用的符号及其对应的值。



| 符号  | 符号的值（基于十进制） | 二进制中使用 | 八进制中使用 | 十进制中使用 | 十六进制中使用 |
| ----- | ---------------------- | ------------ | ------------ | ------------ | -------------- |
| "`0`" | 0                      | ✔️            | ✔️            | ✔️            | ✔️              |
| "`1`" | 1                      | ✔️            | ✔️            | ✔️            | ✔️              |
| "`2`" | 2                      |              | ✔️            | ✔️            | ✔️              |
| "`3`" | 3                      |              | ✔️            | ✔️            | ✔️              |
| "`4`" | 4                      |              | ✔️            | ✔️            | ✔️              |
| "`5`" | 5                      |              | ✔️            | ✔️            | ✔️              |
| "`6`" | 6                      |              | ✔️            | ✔️            | ✔️              |
| "`7`" | 7                      |              | ✔️            | ✔️            | ✔️              |
| "`8`" | 8                      |              |              | ✔️            | ✔️              |
| "`9`" | 9                      |              |              | ✔️            | ✔️              |
| "`A`" | 10                     |              |              |              | ✔️              |
| "`B`" | 11                     |              |              |              | ✔️              |
| "`C`" | 12                     |              |              |              | ✔️              |
| "`D`" | 13                     |              |              |              | ✔️              |
| "`E`" | 14                     |              |              |              | ✔️              |
| "`F`" | 15                     |              |              |              | ✔️              |
| "`G`" | 16                     |              |              |              | ✔️              |

> 表2.1：二、八、十、十六进制数字系统中使用的符号及其值



| 值（基于十进制） | 十六进制表示 | 十进制表示 | 八进制表示 | 二进制表示 |
| ---------------------- | ------------ | ---------- | ---------- | ---------- |
| 0                      | $0_{16}$     | $0_{10}$  | $0_{8}$ | $0_2$      |
| 1                      | $1_{16}$     | $1_{10}$  | $1_{8}$ | $1_2$      |
| 2                      | $2_{16}$     | $2_{10}$  | $2_{8}$ | $10_2$     |
| 3                      | $3_{16}$     | $3_{10}$  | $3_{8}$ | $11_2$     |
| 4                      | $4_{16}$     | $4_{10}$  | $4_{8}$ | $100_2$    |
| 5                      | $5_{16}$     | $5_{10}$  | $5_{8}$ | $101_2$    |
| 6                      | $6_{16}$     | $6_{10}$  | $6_{8}$ | $110_2$    |
| 7                      | $7_{16}$     | $7_{10}$  | $7_{8}$ | $111_2$    |
| 8                      | $8_{16}$     | $8_{10}$  | $10_{8}$ | $1000_2$  |
| 9                      | $9_{16}$     | $9_{10}$  | $11_{8}$ | $1001_2$  |
| 10                     | $A_{16}$     | $10_{10}$ | $12_{8}$ | $1010_2$  |
| 11                     | $B_{16}$     | $11_{10}$ | $13_{8}$ | $1011_2$  |
| 12                     | $C_{16}$     | $12_{10}$ | $14_{8}$ | $1100_2$  |
| 13                     | $D_{16}$     | $13_{10}$ | $15_{8}$ | $1101_2$  |
| 14                     | $E_{16}$     | $14_{10}$ | $16_{8}$ | $1110_2$  |
| 15                     | $F_{16}$     | $15_{10}$ | $17_{8}$ | $1111_2$  |
| 16                     | $10_{16}$    | $16_{10}$ | $20_{8}$ | $10000_2$ |
| 17                     | $11_{16}$    | $17_{10}$ | $21_{8}$ | $10001_2$ |
| 18                     | $12_{16}$    | $18_{10}$ | $22_{8}$ | $10010_2$ |
| 19                     | $13_{16}$    | $19_{10}$ | $23_{8}$ | $10011_2$ |
| 20                     | $14_{16}$    | $20_{10}$ | $24_{8}$ | $10100_2$ |

> 表2.2 ：值0~20在二、八、十、十六进制数字系统中的表示



## 2.1.1 在不同的进制之间对数字进行转换

在许多情况下，在不同的位置数字系统之间转换数字是一项常见的任务，特别是在编程或调试计算机系统时。由于人类通常更喜欢使用十进制数字系统进行思考，他们通常将其他位置数字系统的数字转换为十进制数字系统来推理它们的值。此外，在某些情况下，可能需要转换值为二进制、八进制或十六进制数字系统。

公式2.4展示了如何在任意位置数字系统上计算的数字的值

要在位置数字系统中表示值 $V$，必须找到如同公式2.4中的序列 $d_{base}^{m-1}d_{base}^{m-2}...d_{base}^1d_{base}^0$ ，这个序列的基是 $b$。 令 $v(d_b^i)$为序列中第 $i$个digit的值，则有公式
$$
V = v(d_b^{m-1}) \times b^{m-1} + ... + v(d_b^1) \times b^1+ v(d_b^0)\times b^0 \tag{2.6}
$$
化简一下：
$$
V = b \times \underbrace{(v(d_b^{m-1}) \times b^{m-2} + ... + v(d_b^1) \times b^0)}_{  V'} + v(d_b^0) \tag{2.6}
$$
_{\text{digit value}}

# 2.2 在计算机中表示数字

## 2.2.1 无符号数字

## 2.2.1 有符号数字

## 2.2.1 二进制运算和溢出

## 2.2.1 整数溢出



# 2.3 文本的表示



# 2.4 在内存中组织数据

## 2.4.1 主存中的文本

## 2.4.2 主存中的数字

## 2.4.3 主存中的数组

## 2.4.4 主存中的结构体（struct）



# 2.5 对指令进行编码
